<!DOCTYPE html>
{% load static %}
{% load vote_extras %}
<html>

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Dashboard</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
	<script src="https://cdn.rawgit.com/rmariuzzo/checkboxes.js/4a4b8f1d/dist/jquery.checkboxes-1.2.0.min.js" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
	<div class="container">
		 <div id="loginbox" style="margin-top:50px;" class="mainbox col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
			 {% for message in messages %}
						<div class="alert alert-{{ message.tags }}">{{ message }}</div>
				{% endfor %}
				<div class="row">
					<div class="col-md-4">
					<div class="panel panel-info" >
						<div class="panel-heading">
								<div class="panel-title">Settings</div>
						</div>
						<div style="padding-top:30px" class="panel-body" >
							{% if started != "2" %}
							 <button type="button" class="btn btn-success btn-block" onclick="location.href='/admin/election/start/';" {% if started == "1" %} disabled> Election running!{% else %}>Start Elections{% endif %}</button>
							 <button type="button" class="btn btn-danger btn-block" onclick="location.href='/admin/election/stop/';" {% if started == "0" %} disabled> Election not running!{% else %}>Stop Elections{% endif %}</button>
							{% endif %}
							 {% if started == "0" %}<button type="button" class="btn btn-success btn-block" onclick="location.href='/admin/election/finalize/';" {% if started == "2" %} disabled> Election finalized{% else %}>Finalize Election{% endif %}</button>{% endif %}
							 {% if started == "0" %}<button type="button" class="btn btn-danger btn-block" onclick="location.href='/admin/election/reset/';">Reset Election</button>{% endif %}
							 <button type="button" class="btn btn-info btn-block" onclick="location.href='/logout/';">Logout</button>
						</div>
					</div>
					<div class="panel panel-info" >
						<div class="panel-heading">
								<div class="panel-title">Voters</div>
						</div>
						<div style="padding-top:30px" class="panel-body" >
							<!-- Trigger the modal with a button -->
							 {% if started == "0" %}<button type="button" class="btn btn-info btn-block" data-toggle="modal" data-target="#addvoter">Add voter/s</button>
							 <br>{% endif %}
							 <!-- Modal -->
							 <div id="addvoter" class="modal fade" role="dialog">
								 <div class="modal-dialog">

									 <!-- Modal content-->
									 <div class="modal-content">
										 <div class="modal-header">
											 <button type="button" class="close" data-dismiss="modal">&times;</button>
											 <h4 class="modal-title">Add voter/s</h4>
										 </div>
										 <form action="/admin/generate/" method="post">
											 {% csrf_token %}
										 <div class="modal-body">
											 <div class="form-group">
												 <label for="comment">Enter email of voter/s (different line for each voter):</label>
												 <textarea class="form-control" name="emails" rows="5"></textarea>
											 </div>
										 </div>
										 <div class="modal-footer">
											 <input type="submit" class="btn btn-primary" value="Add voter/s">
											 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										 </div>
										 </form>
									 </div>

								 </div>
							 </div>
							<table class="table table-condensed table-striped">
								<tbody>
									{% for voter in voters %}
									<tr>
										<td><label>{{ voter.email }}</label></td>
										{% if started == "0" %}<td><button type="button" class="btn btn-danger btn-block" onclick="location.href='/admin/voter/delete/{{ voter.pk }}/';">Delete Voter</button></td>{% endif %}
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="col-md-8">
					 <div class="panel panel-info" >
						 <div class="panel-heading">
								 <div class="panel-title">Candidates</div>
						 </div>
						 <div style="padding-top:30px" class="panel-body" >
							 <!-- Trigger the modal with a button -->
								{% if started == "0" %}<button type="button" class="btn btn-info btn-block" data-toggle="modal" data-target="#addcandidate">Add candidate/s</button>
								<br>{% endif %}
								<!-- Modal -->
								<div id="addcandidate" class="modal fade" role="dialog">
								  <div class="modal-dialog">

								    <!-- Modal content-->
								    <div class="modal-content">
								      <div class="modal-header">
								        <button type="button" class="close" data-dismiss="modal">&times;</button>
								        <h4 class="modal-title">Add candidate</h4>
								      </div>
											<form action="/admin/candidate/add/" method="post">
												{% csrf_token %}
								      <div class="modal-body">
												<div class="form-group">
												  <label>Name:</label>
												  <input type="text" class="form-control" name="name"></input>
												</div>
												<div class="form-group">
												  <label>Nickname:</label>
												  <input type="text" class="form-control" name="nickname"></input>
												</div>
												<div class="form-group">
												  <label>Description</label>
												  <textarea class="form-control" name="description" rows="5"></textarea>
												</div>
								      </div>
								      <div class="modal-footer">
												<input type="submit" class="btn btn-primary" value="Add candidate">
								        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								      </div>
											</form>
								    </div>

								  </div>
								</div>
	             <table class="table table-condensed table-striped">
	               <tbody>
	                 {% for candidate in candidates %}
	                 <tr>
	                   <td><label>{{ candidate.name }} ({{ candidate.nickname }}) | {{ candidate.votes }} votes</label><br><i>{{ candidate.description }}</i></td>
										 {% if started == "0" %}<td><button type="button" class="btn btn-info btn-block" data-toggle="modal" data-target="#editcandidate">Edit candidate</button></td>{% endif %}
										 <!-- Trigger the modal with a button -->
										 <!-- Modal -->
										 <div id="editcandidate" class="modal fade" role="dialog">
											 <div class="modal-dialog">

												 <!-- Modal content-->
												 <div class="modal-content">
													 <div class="modal-header">
														 <button type="button" class="close" data-dismiss="modal">&times;</button>
														 <h4 class="modal-title">Edit candidate</h4>
													 </div>
													 <form action="/admin/candidate/edit/" method="post">
														 <input type="hidden" name="pk" value="{{ candidate.pk }}"></input>
														 {% csrf_token %}
													 <div class="modal-body">
														 <div class="form-group">
															 <label>Name:</label>
															 <input type="text" class="form-control" name="name" value="{{ candidate.name }}"></input>
														 </div>
														 <div class="form-group">
															 <label>Nickname:</label>
															 <input type="text" class="form-control" name="nickname" value="{{ candidate.nickname }}"></input>
														 </div>
														 <div class="form-group">
															 <label>Description</label>
															 <textarea class="form-control" name="description" rows="5">{{ candidate.description }}</textarea>
														 </div>
													 </div>
													 <div class="modal-footer">
														 <input type="submit" class="btn btn-primary" value="Update candidate">
														 <button type="button" class="btn btn-danger" onclick="location.href='/admin/candidate/delete/{{ candidate.pk }}/';">Delete candidate</button>
														 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
													 </div>
													 </form>
												 </div>

											 </div>
										 </div>
	                 </tr>
	                 {% endfor %}
	               </tbody>
	             </table>
						 </div>
			     </div>
				 </div>
			 </div>
 </div>
</body>

</html>
